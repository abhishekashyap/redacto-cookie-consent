{"version":3,"file":"redacto-cookie-consent.min.js","sources":["../src/utils/dom.ts","../src/utils/cookies.ts","../src/utils/consent.ts","../src/components/Banner.ts","../src/components/Modal.ts","../src/config/defaults.ts","../src/index.ts","../src/ConsentManager.ts"],"sourcesContent":["export class DOMUtils {\n  static createElement(\n    tag: string,\n    className?: string,\n    id?: string\n  ): HTMLElement {\n    const element = document.createElement(tag);\n    if (className) element.className = className;\n    if (id) element.id = id;\n    return element;\n  }\n\n  static createButton(\n    text: string,\n    className?: string,\n    onClick?: () => void\n  ): HTMLButtonElement {\n    const button = document.createElement(\"button\");\n    button.textContent = text;\n    if (className) button.className = className;\n    if (onClick) button.addEventListener(\"click\", onClick);\n    return button;\n  }\n\n  static createDiv(className?: string, content?: string): HTMLDivElement {\n    const div = document.createElement(\"div\");\n    if (className) div.className = className;\n    if (content) div.innerHTML = content;\n    return div;\n  }\n\n  static createSpan(className?: string, content?: string): HTMLSpanElement {\n    const span = document.createElement(\"span\");\n    if (className) span.className = className;\n    if (content) span.textContent = content;\n    return span;\n  }\n\n  static createParagraph(\n    className?: string,\n    content?: string\n  ): HTMLParagraphElement {\n    const p = document.createElement(\"p\");\n    if (className) p.className = className;\n    if (content) p.textContent = content;\n    return p;\n  }\n\n  static createHeading(\n    level: 1 | 2 | 3 | 4 | 5 | 6,\n    className?: string,\n    content?: string\n  ): HTMLHeadingElement {\n    const heading = document.createElement(`h${level}`);\n    if (className) heading.className = className;\n    if (content) heading.textContent = content;\n    return heading;\n  }\n\n  static createLink(\n    href: string,\n    text: string,\n    className?: string,\n    target?: string\n  ): HTMLAnchorElement {\n    const link = document.createElement(\"a\");\n    link.href = href;\n    link.textContent = text;\n    if (className) link.className = className;\n    if (target) link.target = target;\n    return link;\n  }\n\n  static createCheckbox(\n    id: string,\n    checked: boolean = false,\n    disabled: boolean = false\n  ): HTMLInputElement {\n    const checkbox = document.createElement(\"input\");\n    checkbox.type = \"checkbox\";\n    checkbox.id = id;\n    checkbox.checked = checked;\n    checkbox.disabled = disabled;\n    return checkbox;\n  }\n\n  static createLabel(\n    forId: string,\n    text: string,\n    className?: string\n  ): HTMLLabelElement {\n    const label = document.createElement(\"label\");\n    label.htmlFor = forId;\n    label.textContent = text;\n    if (className) label.className = className;\n    return label;\n  }\n\n  static addStyles(element: HTMLElement, styles: Record<string, string>): void {\n    Object.assign(element.style, styles);\n  }\n\n  static addClass(element: HTMLElement, className: string): void {\n    element.classList.add(className);\n  }\n\n  static removeClass(element: HTMLElement, className: string): void {\n    element.classList.remove(className);\n  }\n\n  static toggleClass(element: HTMLElement, className: string): void {\n    element.classList.toggle(className);\n  }\n\n  static hasClass(element: HTMLElement, className: string): boolean {\n    return element.classList.contains(className);\n  }\n\n  static show(element: HTMLElement): void {\n    element.style.display = \"block\";\n  }\n\n  static hide(element: HTMLElement): void {\n    element.style.display = \"none\";\n  }\n\n  static isVisible(element: HTMLElement): boolean {\n    return element.style.display !== \"none\" && element.offsetParent !== null;\n  }\n\n  static getElementById(id: string): HTMLElement | null {\n    return document.getElementById(id);\n  }\n\n  static getElementsByClassName(className: string): HTMLCollectionOf<Element> {\n    return document.getElementsByClassName(className);\n  }\n\n  static querySelector(selector: string): Element | null {\n    return document.querySelector(selector);\n  }\n\n  static querySelectorAll(selector: string): NodeListOf<Element> {\n    return document.querySelectorAll(selector);\n  }\n\n  static appendChild(parent: HTMLElement, child: HTMLElement): void {\n    parent.appendChild(child);\n  }\n\n  static removeChild(parent: HTMLElement, child: HTMLElement): void {\n    if (parent.contains(child)) {\n      parent.removeChild(child);\n    }\n  }\n\n  static insertBefore(\n    parent: HTMLElement,\n    newChild: HTMLElement,\n    referenceChild: HTMLElement\n  ): void {\n    parent.insertBefore(newChild, referenceChild);\n  }\n\n  static replaceChild(\n    parent: HTMLElement,\n    newChild: HTMLElement,\n    oldChild: HTMLElement\n  ): void {\n    parent.replaceChild(newChild, oldChild);\n  }\n\n  static addEventListener(\n    element: HTMLElement,\n    event: string,\n    handler: EventListener\n  ): void {\n    element.addEventListener(event, handler);\n  }\n\n  static removeEventListener(\n    element: HTMLElement,\n    event: string,\n    handler: EventListener\n  ): void {\n    element.removeEventListener(event, handler);\n  }\n\n  static createStyleSheet(css: string): HTMLStyleElement {\n    const style = document.createElement(\"style\");\n    style.textContent = css;\n    return style;\n  }\n\n  static injectCSS(css: string, id?: string): HTMLStyleElement {\n    const style = this.createStyleSheet(css);\n    if (id) style.id = id;\n    document.head.appendChild(style);\n    return style;\n  }\n\n  static removeStyleSheet(id: string): void {\n    const style = document.getElementById(id) as HTMLStyleElement;\n    if (style) {\n      style.remove();\n    }\n  }\n\n  static getViewportSize(): { width: number; height: number } {\n    return {\n      width: window.innerWidth || document.documentElement.clientWidth,\n      height: window.innerHeight || document.documentElement.clientHeight,\n    };\n  }\n\n  static isMobile(): boolean {\n    return window.innerWidth <= 768;\n  }\n\n  static isTablet(): boolean {\n    return window.innerWidth > 768 && window.innerWidth <= 1024;\n  }\n\n  static isDesktop(): boolean {\n    return window.innerWidth > 1024;\n  }\n\n  static getDeviceType(): \"mobile\" | \"tablet\" | \"desktop\" {\n    if (this.isMobile()) return \"mobile\";\n    if (this.isTablet()) return \"tablet\";\n    return \"desktop\";\n  }\n\n  static debounce<T extends (...args: any[]) => any>(\n    func: T,\n    wait: number\n  ): (...args: Parameters<T>) => void {\n    let timeout: NodeJS.Timeout;\n    return (...args: Parameters<T>) => {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => func(...args), wait);\n    };\n  }\n\n  static throttle<T extends (...args: any[]) => any>(\n    func: T,\n    limit: number\n  ): (...args: Parameters<T>) => void {\n    let inThrottle: boolean;\n    return (...args: Parameters<T>) => {\n      if (!inThrottle) {\n        func(...args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  static escapeHtml(text: string): string {\n    const div = document.createElement(\"div\");\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  static sanitizeHtml(html: string): string {\n    const div = document.createElement(\"div\");\n    div.innerHTML = html;\n    return div.textContent || div.innerText || \"\";\n  }\n}\n","import { ConsentData } from \"../types\";\n\nexport class CookieManager {\n  private static instance: CookieManager;\n\n  static getInstance(): CookieManager {\n    if (!CookieManager.instance) {\n      CookieManager.instance = new CookieManager();\n    }\n    return CookieManager.instance;\n  }\n\n  setCookie(\n    name: string,\n    value: string,\n    days: number = 365,\n    domain?: string,\n    path: string = \"/\"\n  ): void {\n    try {\n      const expires = new Date();\n      expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);\n\n      const cookieString = [\n        `${name}=${encodeURIComponent(value)}`,\n        `expires=${expires.toUTCString()}`,\n        `path=${path}`,\n        domain ? `domain=${domain}` : \"\",\n        \"SameSite=Lax\",\n        window.location.protocol === \"https:\" ? \"Secure\" : \"\",\n      ]\n        .filter(Boolean)\n        .join(\"; \");\n\n      document.cookie = cookieString;\n    } catch (error) {\n      console.warn(\"Failed to set cookie:\", error);\n    }\n  }\n\n  getCookie(name: string): string | null {\n    try {\n      const nameEQ = name + \"=\";\n      const ca = document.cookie.split(\";\");\n\n      for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) === \" \") c = c.substring(1, c.length);\n        if (c.indexOf(nameEQ) === 0) {\n          return decodeURIComponent(c.substring(nameEQ.length, c.length));\n        }\n      }\n      return null;\n    } catch (error) {\n      console.warn(\"Failed to get cookie:\", error);\n      return null;\n    }\n  }\n\n  deleteCookie(name: string, domain?: string, path: string = \"/\"): void {\n    try {\n      const cookieString = [\n        `${name}=`,\n        \"expires=Thu, 01 Jan 1970 00:00:00 GMT\",\n        `path=${path}`,\n        domain ? `domain=${domain}` : \"\",\n      ]\n        .filter(Boolean)\n        .join(\"; \");\n\n      document.cookie = cookieString;\n    } catch (error) {\n      console.warn(\"Failed to delete cookie:\", error);\n    }\n  }\n\n  getAllCookies(): Record<string, string> {\n    try {\n      const cookies: Record<string, string> = {};\n      const cookieArray = document.cookie.split(\";\");\n\n      for (let cookie of cookieArray) {\n        const [name, value] = cookie.trim().split(\"=\");\n        if (name && value) {\n          cookies[name] = decodeURIComponent(value);\n        }\n      }\n\n      return cookies;\n    } catch (error) {\n      console.warn(\"Failed to get all cookies:\", error);\n      return {};\n    }\n  }\n\n  setConsentData(\n    cookieName: string,\n    consentData: ConsentData,\n    expiryDays: number = 365\n  ): void {\n    try {\n      const consentString = JSON.stringify(consentData);\n      this.setCookie(cookieName, consentString, expiryDays);\n    } catch (error) {\n      console.warn(\"Failed to set consent data:\", error);\n    }\n  }\n\n  getConsentData(cookieName: string): ConsentData | null {\n    try {\n      const consentString = this.getCookie(cookieName);\n      if (!consentString) return null;\n\n      const consentData = JSON.parse(consentString) as ConsentData;\n\n      // Validate consent data structure\n      if (\n        !consentData.timestamp ||\n        !consentData.preferences ||\n        !consentData.complianceType\n      ) {\n        return null;\n      }\n\n      return consentData;\n    } catch (error) {\n      console.warn(\"Failed to get consent data:\", error);\n      return null;\n    }\n  }\n\n  clearConsentData(cookieName: string): void {\n    this.deleteCookie(cookieName);\n  }\n\n  isConsentExpired(consentData: ConsentData, expiryDays: number): boolean {\n    const now = Date.now();\n    const consentTime = consentData.timestamp;\n    const expiryTime = consentTime + expiryDays * 24 * 60 * 60 * 1000;\n\n    return now > expiryTime;\n  }\n\n  getDomain(): string {\n    try {\n      return window.location.hostname;\n    } catch (error) {\n      return \"localhost\";\n    }\n  }\n\n  getRootDomain(): string {\n    try {\n      const hostname = window.location.hostname;\n      const parts = hostname.split(\".\");\n\n      if (parts.length <= 2) {\n        return hostname;\n      }\n\n      return parts.slice(-2).join(\".\");\n    } catch (error) {\n      return \"localhost\";\n    }\n  }\n}\n","import {\n  ConsentData,\n  ConsentPreferences,\n  CookieCategory,\n  ComplianceType,\n} from \"../types\";\nimport { CookieManager } from \"./cookies\";\n\nexport class ConsentManager {\n  private cookieManager: CookieManager;\n\n  constructor() {\n    this.cookieManager = CookieManager.getInstance();\n  }\n\n  generateConsentId(): string {\n    return (\n      \"consent_\" + Math.random().toString(36).substr(2, 9) + \"_\" + Date.now()\n    );\n  }\n\n  createConsentData(\n    preferences: ConsentPreferences,\n    complianceType: ComplianceType,\n    services: Record<string, boolean> = {}\n  ): ConsentData {\n    const consentId = this.generateConsentId();\n\n    return {\n      timestamp: Date.now(),\n      version: \"1.0.0\",\n      preferences,\n      services,\n      complianceType,\n      consentId,\n    };\n  }\n\n  getDefaultPreferences(): ConsentPreferences {\n    return {\n      necessary: true, // Always true as it's required\n      functional: false,\n      analytics: false,\n      advertising: false,\n      social: false,\n      other: false,\n    };\n  }\n\n  validatePreferences(\n    preferences: Partial<ConsentPreferences>\n  ): ConsentPreferences {\n    const defaultPrefs = this.getDefaultPreferences();\n\n    return {\n      necessary: true, // Always true\n      functional: preferences.functional ?? defaultPrefs.functional,\n      analytics: preferences.analytics ?? defaultPrefs.analytics,\n      advertising: preferences.advertising ?? defaultPrefs.advertising,\n      social: preferences.social ?? defaultPrefs.social,\n      other: preferences.other ?? defaultPrefs.other,\n    };\n  }\n\n  hasConsentForCategory(\n    consentData: ConsentData | null,\n    category: CookieCategory\n  ): boolean {\n    if (!consentData) return false;\n\n    // Necessary cookies are always allowed\n    if (category === \"necessary\") return true;\n\n    return consentData.preferences[category] === true;\n  }\n\n  hasConsentForService(\n    consentData: ConsentData | null,\n    serviceId: string\n  ): boolean {\n    if (!consentData) return false;\n\n    const serviceConsent = consentData.services[serviceId];\n    return serviceConsent === \"granted\";\n  }\n\n  isConsentValid(consentData: ConsentData | null, expiryDays: number): boolean {\n    if (!consentData) return false;\n\n    return !this.cookieManager.isConsentExpired(consentData, expiryDays);\n  }\n\n  mergeConsentData(\n    existing: ConsentData | null,\n    newPreferences: Partial<ConsentPreferences>,\n    complianceType: ComplianceType\n  ): ConsentData {\n    const validatedPreferences = this.validatePreferences(newPreferences);\n\n    if (existing && this.isConsentValid(existing, 365)) {\n      return {\n        ...existing,\n        timestamp: Date.now(),\n        preferences: validatedPreferences,\n        complianceType,\n      };\n    }\n\n    return this.createConsentData(validatedPreferences, complianceType);\n  }\n\n  getConsentSummary(consentData: ConsentData | null): {\n    hasConsent: boolean;\n    categories: Record<CookieCategory, boolean>;\n    totalServices: number;\n    consentedServices: number;\n  } {\n    if (!consentData) {\n      return {\n        hasConsent: false,\n        categories: this.getDefaultPreferences(),\n        totalServices: 0,\n        consentedServices: 0,\n      };\n    }\n\n    const services = Object.values(consentData.services);\n    const consentedServices = services.filter(\n      (state) => state === \"granted\"\n    ).length;\n\n    return {\n      hasConsent: true,\n      categories: consentData.preferences,\n      totalServices: services.length,\n      consentedServices,\n    };\n  }\n\n  // DPDPA specific compliance checks\n  isDPDPACompliant(consentData: ConsentData | null): boolean {\n    if (!consentData || consentData.complianceType !== \"DPDPA\") {\n      return false;\n    }\n\n    // DPDPA requires explicit consent for all non-necessary categories\n    const { preferences } = consentData;\n\n    // Check if user has made explicit choices for all categories\n    const hasExplicitConsent = Object.entries(preferences).every(\n      ([category, granted]) => {\n        if (category === \"necessary\") return true; // Always required\n        return granted !== undefined; // Must have explicit choice\n      }\n    );\n\n    return hasExplicitConsent;\n  }\n\n  // GDPR specific compliance checks\n  isGDPRCompliant(consentData: ConsentData | null): boolean {\n    if (!consentData || consentData.complianceType !== \"GDPR\") {\n      return false;\n    }\n\n    // GDPR requires explicit consent for all non-necessary categories\n    const { preferences } = consentData;\n\n    // Check if user has made explicit choices for all categories\n    const hasExplicitConsent = Object.entries(preferences).every(\n      ([category, granted]) => {\n        if (category === \"necessary\") return true; // Always required\n        return granted !== undefined; // Must have explicit choice\n      }\n    );\n\n    return hasExplicitConsent;\n  }\n\n  // CCPA specific compliance checks\n  isCCPACompliant(consentData: ConsentData | null): boolean {\n    if (!consentData || consentData.complianceType !== \"CCPA\") {\n      return false;\n    }\n\n    // CCPA allows opt-out for sale of personal information\n    // For now, we consider it compliant if consent data exists\n    return true;\n  }\n\n  getComplianceStatus(consentData: ConsentData | null): {\n    isCompliant: boolean;\n    complianceType: ComplianceType | null;\n    issues: string[];\n  } {\n    if (!consentData) {\n      return {\n        isCompliant: false,\n        complianceType: null,\n        issues: [\"No consent data found\"],\n      };\n    }\n\n    const issues: string[] = [];\n    let isCompliant = false;\n\n    switch (consentData.complianceType) {\n      case \"DPDPA\":\n        isCompliant = this.isDPDPACompliant(consentData);\n        if (!isCompliant) {\n          issues.push(\"DPDPA compliance requirements not met\");\n        }\n        break;\n      case \"GDPR\":\n        isCompliant = this.isGDPRCompliant(consentData);\n        if (!isCompliant) {\n          issues.push(\"GDPR compliance requirements not met\");\n        }\n        break;\n      case \"CCPA\":\n        isCompliant = this.isCCPACompliant(consentData);\n        if (!isCompliant) {\n          issues.push(\"CCPA compliance requirements not met\");\n        }\n        break;\n      default:\n        issues.push(\"Unknown compliance type\");\n    }\n\n    return {\n      isCompliant,\n      complianceType: consentData.complianceType,\n      issues,\n    };\n  }\n}\n","import { DOMUtils } from \"../utils/dom\";\nimport { RedactoConfig, ConsentPreferences } from \"../types\";\n\nexport class ConsentBanner {\n  private config: RedactoConfig;\n  private bannerElement: HTMLElement | null = null;\n  private isVisible: boolean = false;\n\n  constructor(config: RedactoConfig) {\n    this.config = config;\n  }\n\n  create(): HTMLElement {\n    const banner = DOMUtils.createElement(\"div\", \"redacto-banner\");\n    DOMUtils.addClass(banner, this.config.banner.position);\n\n    // Apply custom styles\n    this.applyBannerStyles(banner);\n\n    // Create banner content\n    const content = this.createBannerContent();\n    DOMUtils.appendChild(banner, content);\n\n    this.bannerElement = banner;\n    return banner;\n  }\n\n  private createBannerContent(): HTMLElement {\n    const content = DOMUtils.createElement(\"div\", \"redacto-banner-content\");\n\n    // Add icon if enabled\n    if (this.config.banner.showIcon) {\n      const icon = this.createIcon();\n      DOMUtils.appendChild(content, icon);\n    }\n\n    // Add text content\n    const textContent = this.createTextContent();\n    DOMUtils.appendChild(content, textContent);\n\n    // Add action buttons\n    const actions = this.createActionButtons();\n    DOMUtils.appendChild(content, actions);\n\n    return content;\n  }\n\n  private createIcon(): HTMLElement {\n    const icon = DOMUtils.createElement(\"div\", \"redacto-banner-icon\");\n    icon.innerHTML = `\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" fill=\"currentColor\"/>\n      </svg>\n    `;\n    return icon;\n  }\n\n  private createTextContent(): HTMLElement {\n    const textContent = DOMUtils.createElement(\"div\", \"redacto-banner-text\");\n\n    const title = DOMUtils.createElement(\"h3\", \"redacto-banner-title\");\n    title.textContent = this.config.texts.bannerTitle;\n    DOMUtils.appendChild(textContent, title);\n\n    const description = DOMUtils.createElement(\n      \"p\",\n      \"redacto-banner-description\"\n    );\n    description.textContent = this.config.texts.bannerDescription;\n    DOMUtils.appendChild(textContent, description);\n\n    return textContent;\n  }\n\n  private createActionButtons(): HTMLElement {\n    const actions = DOMUtils.createElement(\"div\", \"redacto-banner-actions\");\n\n    // Accept All button\n    const acceptButton = DOMUtils.createButton(\n      this.config.texts.acceptAllText,\n      \"redacto-banner-button primary\",\n      () => this.onAcceptAll()\n    );\n    DOMUtils.appendChild(actions, acceptButton);\n\n    // Reject All button\n    const rejectButton = DOMUtils.createButton(\n      this.config.texts.rejectAllText,\n      \"redacto-banner-button secondary\",\n      () => this.onRejectAll()\n    );\n    DOMUtils.appendChild(actions, rejectButton);\n\n    // Manage Preferences button\n    const manageButton = DOMUtils.createButton(\n      this.config.texts.managePreferencesText,\n      \"redacto-banner-button outline\",\n      () => this.onManagePreferences()\n    );\n    DOMUtils.appendChild(actions, manageButton);\n\n    return actions;\n  }\n\n  private applyBannerStyles(banner: HTMLElement): void {\n    const styles = {\n      backgroundColor: this.config.banner.backgroundColor,\n      color: this.config.banner.textColor,\n      borderRadius: this.config.banner.borderRadius,\n      fontSize: this.config.banner.fontSize,\n      fontFamily: this.config.banner.fontFamily,\n      padding: this.config.banner.padding,\n      margin: this.config.banner.margin,\n      zIndex: this.config.banner.zIndex.toString(),\n    };\n\n    DOMUtils.addStyles(banner, styles);\n\n    // Apply button styles\n    this.applyButtonStyles(banner);\n  }\n\n  private applyButtonStyles(banner: HTMLElement): void {\n    const acceptButton = banner.querySelector(\n      \".redacto-banner-button.primary\"\n    ) as HTMLElement;\n    const rejectButton = banner.querySelector(\n      \".redacto-banner-button.secondary\"\n    ) as HTMLElement;\n    const manageButton = banner.querySelector(\n      \".redacto-banner-button.outline\"\n    ) as HTMLElement;\n\n    if (acceptButton) {\n      DOMUtils.addStyles(acceptButton, {\n        backgroundColor: this.config.banner.acceptButtonColor,\n        color: this.config.banner.acceptButtonTextColor,\n      });\n    }\n\n    if (rejectButton) {\n      DOMUtils.addStyles(rejectButton, {\n        backgroundColor: this.config.banner.rejectButtonColor,\n        color: this.config.banner.rejectButtonTextColor,\n      });\n    }\n\n    if (manageButton) {\n      DOMUtils.addStyles(manageButton, {\n        color: this.config.banner.manageButtonTextColor,\n        borderColor: this.config.banner.manageButtonTextColor,\n      });\n    }\n  }\n\n  show(): void {\n    if (!this.bannerElement) {\n      this.create();\n    }\n\n    if (this.bannerElement && !this.isVisible) {\n      document.body.appendChild(this.bannerElement);\n      this.isVisible = true;\n\n      // Trigger animation\n      if (this.config.banner.animation !== \"none\") {\n        this.animateIn();\n      }\n\n      // Call callback\n      if (this.config.onBannerShow) {\n        this.config.onBannerShow();\n      }\n    }\n  }\n\n  hide(): void {\n    if (this.bannerElement && this.isVisible) {\n      if (this.config.banner.animation !== \"none\") {\n        this.animateOut(() => {\n          this.removeBanner();\n        });\n      } else {\n        this.removeBanner();\n      }\n    }\n  }\n\n  private removeBanner(): void {\n    if (this.bannerElement && this.bannerElement.parentNode) {\n      this.bannerElement.parentNode.removeChild(this.bannerElement);\n      this.isVisible = false;\n\n      // Call callback\n      if (this.config.onBannerHide) {\n        this.config.onBannerHide();\n      }\n    }\n  }\n\n  private animateIn(): void {\n    if (!this.bannerElement) return;\n\n    const animationClass = this.getAnimationClass(\"in\");\n    DOMUtils.addClass(this.bannerElement, animationClass);\n\n    setTimeout(() => {\n      if (this.bannerElement) {\n        DOMUtils.removeClass(this.bannerElement, animationClass);\n      }\n    }, this.config.banner.animationDuration);\n  }\n\n  private animateOut(callback: () => void): void {\n    if (!this.bannerElement) return;\n\n    const animationClass = this.getAnimationClass(\"out\");\n    DOMUtils.addClass(this.bannerElement, animationClass);\n\n    setTimeout(() => {\n      callback();\n    }, this.config.banner.animationDuration);\n  }\n\n  private getAnimationClass(direction: \"in\" | \"out\"): string {\n    const position = this.config.banner.position;\n    const animation = this.config.banner.animation;\n\n    if (direction === \"in\") {\n      switch (animation) {\n        case \"slide\":\n          return position === \"top\" ? \"slideInDown\" : \"slideInUp\";\n        case \"fade\":\n          return \"fadeIn\";\n        default:\n          return \"\";\n      }\n    } else {\n      switch (animation) {\n        case \"slide\":\n          return position === \"top\" ? \"slideOutUp\" : \"slideOutDown\";\n        case \"fade\":\n          return \"fadeOut\";\n        default:\n          return \"\";\n      }\n    }\n  }\n\n  private onAcceptAll(): void {\n    const preferences: ConsentPreferences = {\n      necessary: true,\n      functional: true,\n      analytics: true,\n      advertising: true,\n      social: true,\n      other: true,\n    };\n\n    this.triggerConsentChange(preferences);\n    this.hide();\n  }\n\n  private onRejectAll(): void {\n    const preferences: ConsentPreferences = {\n      necessary: true, // Always required\n      functional: false,\n      analytics: false,\n      advertising: false,\n      social: false,\n      other: false,\n    };\n\n    this.triggerConsentChange(preferences);\n    this.hide();\n  }\n\n  private onManagePreferences(): void {\n    this.hide();\n    // This will be handled by the main consent manager\n    if (this.config.onModalShow) {\n      this.config.onModalShow();\n    }\n  }\n\n  private triggerConsentChange(preferences: ConsentPreferences): void {\n    // This will be handled by the main consent manager\n    if (this.config.onConsentChange) {\n      // Create a mock consent data for the callback\n      const consentData = {\n        timestamp: Date.now(),\n        version: \"1.0.0\",\n        preferences,\n        services: {},\n        complianceType: this.config.complianceType,\n        consentId: \"banner_\" + Date.now(),\n      };\n      this.config.onConsentChange(consentData);\n    }\n  }\n\n  updateConfig(newConfig: Partial<RedactoConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n\n    if (this.bannerElement) {\n      // Recreate banner with new config\n      this.hide();\n      this.bannerElement = null;\n      this.show();\n    }\n  }\n\n  destroy(): void {\n    this.hide();\n    this.bannerElement = null;\n  }\n\n  isBannerVisible(): boolean {\n    return this.isVisible;\n  }\n}\n","import { DOMUtils } from \"../utils/dom\";\nimport { RedactoConfig, ConsentPreferences, CookieCategory } from \"../types\";\n\nexport class ConsentModal {\n  private config: RedactoConfig;\n  private modalElement: HTMLElement | null = null;\n  private overlayElement: HTMLElement | null = null;\n  private isVisible: boolean = false;\n  private currentPreferences: ConsentPreferences;\n\n  constructor(config: RedactoConfig) {\n    this.config = config;\n    this.currentPreferences = {\n      necessary: true,\n      functional: false,\n      analytics: false,\n      advertising: false,\n      social: false,\n      other: false,\n    };\n  }\n\n  create(): HTMLElement {\n    const overlay = DOMUtils.createElement(\"div\", \"redacto-modal-overlay\");\n    this.applyOverlayStyles(overlay);\n\n    const modal = DOMUtils.createElement(\"div\", \"redacto-modal\");\n    this.applyModalStyles(modal);\n\n    // Create modal content\n    const header = this.createModalHeader();\n    const content = this.createModalContent();\n    const footer = this.createModalFooter();\n\n    DOMUtils.appendChild(modal, header);\n    DOMUtils.appendChild(modal, content);\n    DOMUtils.appendChild(modal, footer);\n\n    DOMUtils.appendChild(overlay, modal);\n\n    this.overlayElement = overlay;\n    this.modalElement = modal;\n\n    return overlay;\n  }\n\n  private createModalHeader(): HTMLElement {\n    const header = DOMUtils.createElement(\"div\", \"redacto-modal-header\");\n\n    const title = DOMUtils.createElement(\"h2\", \"redacto-modal-title\");\n    title.textContent = this.config.texts.modalTitle;\n    DOMUtils.appendChild(header, title);\n\n    const description = DOMUtils.createElement(\n      \"p\",\n      \"redacto-modal-description\"\n    );\n    description.textContent = this.config.texts.modalDescription;\n    DOMUtils.appendChild(header, description);\n\n    return header;\n  }\n\n  private createModalContent(): HTMLElement {\n    const content = DOMUtils.createElement(\"div\", \"redacto-modal-content\");\n\n    // Create category sections\n    const categories: CookieCategory[] = [\n      \"necessary\",\n      \"functional\",\n      \"analytics\",\n      \"advertising\",\n      \"social\",\n      \"other\",\n    ];\n\n    categories.forEach((category) => {\n      const categoryElement = this.createCategorySection(category);\n      DOMUtils.appendChild(content, categoryElement);\n    });\n\n    // Add links section\n    const links = this.createLinksSection();\n    DOMUtils.appendChild(content, links);\n\n    return content;\n  }\n\n  private createCategorySection(category: CookieCategory): HTMLElement {\n    const categoryDiv = DOMUtils.createElement(\"div\", \"redacto-category\");\n\n    const header = DOMUtils.createElement(\"div\", \"redacto-category-header\");\n\n    const checkbox = DOMUtils.createCheckbox(\n      `category-${category}`,\n      this.currentPreferences[category],\n      category === \"necessary\" // Necessary cookies are always required\n    );\n    DOMUtils.addClass(checkbox, \"redacto-category-checkbox\");\n    DOMUtils.appendChild(header, checkbox);\n\n    const title = DOMUtils.createElement(\"h4\", \"redacto-category-title\");\n    title.textContent = this.getCategoryTitle(category);\n    DOMUtils.appendChild(header, title);\n\n    DOMUtils.appendChild(categoryDiv, header);\n\n    const description = DOMUtils.createElement(\n      \"p\",\n      \"redacto-category-description\"\n    );\n    description.textContent = this.getCategoryDescription(category);\n    DOMUtils.appendChild(categoryDiv, description);\n\n    // Add services for this category\n    const services = this.config.services.filter(\n      (service) => service.category === category\n    );\n    if (services.length > 0) {\n      const servicesDiv = this.createServicesSection(services);\n      DOMUtils.appendChild(categoryDiv, servicesDiv);\n    }\n\n    // Add event listener for checkbox\n    checkbox.addEventListener(\"change\", (e) => {\n      const target = e.target as HTMLInputElement;\n      this.currentPreferences[category] = target.checked;\n      this.updateServicesState(category, target.checked);\n    });\n\n    return categoryDiv;\n  }\n\n  private createServicesSection(services: any[]): HTMLElement {\n    const servicesDiv = DOMUtils.createElement(\"div\", \"redacto-services\");\n\n    services.forEach((service) => {\n      const serviceDiv = DOMUtils.createElement(\"div\", \"redacto-service\");\n\n      const checkbox = DOMUtils.createCheckbox(\n        `service-${service.id}`,\n        this.currentPreferences[service.category]\n      );\n      DOMUtils.addClass(checkbox, \"redacto-service-checkbox\");\n      DOMUtils.appendChild(serviceDiv, checkbox);\n\n      const name = DOMUtils.createElement(\"span\", \"redacto-service-name\");\n      name.textContent = service.name;\n      DOMUtils.appendChild(serviceDiv, name);\n\n      if (service.description) {\n        const description = DOMUtils.createElement(\n          \"p\",\n          \"redacto-service-description\"\n        );\n        description.textContent = service.description;\n        DOMUtils.appendChild(serviceDiv, description);\n      }\n\n      DOMUtils.appendChild(servicesDiv, serviceDiv);\n    });\n\n    return servicesDiv;\n  }\n\n  private createLinksSection(): HTMLElement {\n    const linksDiv = DOMUtils.createElement(\"div\", \"redacto-links\");\n\n    if (this.config.privacyUrl) {\n      const privacyLink = DOMUtils.createLink(\n        this.config.privacyUrl,\n        this.config.texts.privacyPolicyText,\n        \"redacto-link\",\n        \"_blank\"\n      );\n      DOMUtils.appendChild(linksDiv, privacyLink);\n    }\n\n    if (this.config.cookiePolicyUrl) {\n      const cookieLink = DOMUtils.createLink(\n        this.config.cookiePolicyUrl,\n        this.config.texts.cookiePolicyText,\n        \"redacto-link\",\n        \"_blank\"\n      );\n      DOMUtils.appendChild(linksDiv, cookieLink);\n    }\n\n    return linksDiv;\n  }\n\n  private createModalFooter(): HTMLElement {\n    const footer = DOMUtils.createElement(\"div\", \"redacto-modal-footer\");\n\n    const saveButton = DOMUtils.createButton(\n      this.config.texts.savePreferencesText,\n      \"redacto-banner-button primary\",\n      () => this.onSavePreferences()\n    );\n    DOMUtils.appendChild(footer, saveButton);\n\n    const cancelButton = DOMUtils.createButton(\n      \"Cancel\",\n      \"redacto-banner-button outline\",\n      () => this.hide()\n    );\n    DOMUtils.appendChild(footer, cancelButton);\n\n    return footer;\n  }\n\n  private applyOverlayStyles(overlay: HTMLElement): void {\n    const styles = {\n      backgroundColor: this.config.modal.overlayColor,\n      zIndex: this.config.modal.zIndex.toString(),\n    };\n    DOMUtils.addStyles(overlay, styles);\n  }\n\n  private applyModalStyles(modal: HTMLElement): void {\n    const styles = {\n      backgroundColor: this.config.modal.backgroundColor,\n      color: this.config.modal.textColor,\n      borderRadius: this.config.modal.borderRadius,\n      fontSize: this.config.modal.fontSize,\n      fontFamily: this.config.modal.fontFamily,\n      padding: this.config.modal.padding,\n      maxWidth: this.config.modal.maxWidth,\n      maxHeight: this.config.modal.maxHeight,\n    };\n    DOMUtils.addStyles(modal, styles);\n  }\n\n  private getCategoryTitle(category: CookieCategory): string {\n    switch (category) {\n      case \"necessary\":\n        return this.config.texts.necessaryTitle;\n      case \"functional\":\n        return this.config.texts.functionalTitle;\n      case \"analytics\":\n        return this.config.texts.analyticsTitle;\n      case \"advertising\":\n        return this.config.texts.advertisingTitle;\n      case \"social\":\n        return this.config.texts.socialTitle;\n      case \"other\":\n        return this.config.texts.otherTitle;\n      default:\n        return category.charAt(0).toUpperCase() + category.slice(1);\n    }\n  }\n\n  private getCategoryDescription(category: CookieCategory): string {\n    switch (category) {\n      case \"necessary\":\n        return this.config.texts.necessaryDescription;\n      case \"functional\":\n        return this.config.texts.functionalDescription;\n      case \"analytics\":\n        return this.config.texts.analyticsDescription;\n      case \"advertising\":\n        return this.config.texts.advertisingDescription;\n      case \"social\":\n        return this.config.texts.socialDescription;\n      case \"other\":\n        return this.config.texts.otherDescription;\n      default:\n        return `Description for ${category} cookies.`;\n    }\n  }\n\n  private updateServicesState(\n    category: CookieCategory,\n    enabled: boolean\n  ): void {\n    const services = this.modalElement?.querySelectorAll(\n      `.redacto-service input[type=\"checkbox\"]`\n    );\n    services?.forEach((checkbox) => {\n      const input = checkbox as HTMLInputElement;\n      if (input.id.startsWith(`service-`)) {\n        const serviceId = input.id.replace(\"service-\", \"\");\n        const service = this.config.services.find((s) => s.id === serviceId);\n        if (service && service.category === category) {\n          input.checked = enabled;\n        }\n      }\n    });\n  }\n\n  show(preferences?: ConsentPreferences): void {\n    if (!this.overlayElement) {\n      this.create();\n    }\n\n    if (this.overlayElement && !this.isVisible) {\n      // Set initial preferences\n      if (preferences) {\n        this.currentPreferences = { ...preferences };\n        this.updateCheckboxes();\n      }\n\n      document.body.appendChild(this.overlayElement);\n      this.isVisible = true;\n\n      // Trigger animation\n      if (this.config.modal.animation !== \"none\") {\n        this.animateIn();\n      }\n\n      // Call callback\n      if (this.config.onModalShow) {\n        this.config.onModalShow();\n      }\n    }\n  }\n\n  hide(): void {\n    if (this.overlayElement && this.isVisible) {\n      if (this.config.modal.animation !== \"none\") {\n        this.animateOut(() => {\n          this.removeModal();\n        });\n      } else {\n        this.removeModal();\n      }\n    }\n  }\n\n  private removeModal(): void {\n    if (this.overlayElement && this.overlayElement.parentNode) {\n      this.overlayElement.parentNode.removeChild(this.overlayElement);\n      this.isVisible = false;\n\n      // Call callback\n      if (this.config.onModalHide) {\n        this.config.onModalHide();\n      }\n    }\n  }\n\n  private animateIn(): void {\n    if (!this.overlayElement || !this.modalElement) return;\n\n    const animationClass = this.getAnimationClass(\"in\");\n    DOMUtils.addClass(this.overlayElement, animationClass);\n    DOMUtils.addClass(this.modalElement, animationClass);\n\n    setTimeout(() => {\n      if (this.overlayElement)\n        DOMUtils.removeClass(this.overlayElement, animationClass);\n      if (this.modalElement)\n        DOMUtils.removeClass(this.modalElement, animationClass);\n    }, this.config.modal.animationDuration);\n  }\n\n  private animateOut(callback: () => void): void {\n    if (!this.overlayElement || !this.modalElement) return;\n\n    const animationClass = this.getAnimationClass(\"out\");\n    DOMUtils.addClass(this.overlayElement, animationClass);\n    DOMUtils.addClass(this.modalElement, animationClass);\n\n    setTimeout(() => {\n      callback();\n    }, this.config.modal.animationDuration);\n  }\n\n  private getAnimationClass(direction: \"in\" | \"out\"): string {\n    const animation = this.config.modal.animation;\n\n    if (direction === \"in\") {\n      switch (animation) {\n        case \"slide\":\n          return \"slideInUp\";\n        case \"fade\":\n          return \"fadeIn\";\n        case \"scale\":\n          return \"scaleIn\";\n        default:\n          return \"\";\n      }\n    } else {\n      switch (animation) {\n        case \"slide\":\n          return \"slideOutDown\";\n        case \"fade\":\n          return \"fadeOut\";\n        case \"scale\":\n          return \"scaleOut\";\n        default:\n          return \"\";\n      }\n    }\n  }\n\n  private updateCheckboxes(): void {\n    Object.entries(this.currentPreferences).forEach(([category, enabled]) => {\n      const checkbox = this.overlayElement?.querySelector(\n        `#category-${category}`\n      ) as HTMLInputElement;\n      if (checkbox) {\n        checkbox.checked = enabled;\n      }\n    });\n  }\n\n  private onSavePreferences(): void {\n    // Collect all preferences from checkboxes\n    const preferences: ConsentPreferences = {\n      necessary: true, // Always true\n      functional: false,\n      analytics: false,\n      advertising: false,\n      social: false,\n      other: false,\n    };\n\n    Object.keys(preferences).forEach((category) => {\n      if (category !== \"necessary\") {\n        const checkbox = this.overlayElement?.querySelector(\n          `#category-${category}`\n        ) as HTMLInputElement;\n        if (checkbox) {\n          preferences[category as CookieCategory] = checkbox.checked;\n        }\n      }\n    });\n\n    // Trigger consent change\n    if (this.config.onConsentChange) {\n      const consentData = {\n        timestamp: Date.now(),\n        version: \"1.0.0\",\n        preferences,\n        services: {},\n        complianceType: this.config.complianceType,\n        consentId: \"modal_\" + Date.now(),\n      };\n      this.config.onConsentChange(consentData);\n    }\n\n    this.hide();\n  }\n\n  updateConfig(newConfig: Partial<RedactoConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n\n    if (this.overlayElement) {\n      // Recreate modal with new config\n      this.hide();\n      this.overlayElement = null;\n      this.modalElement = null;\n      this.show(this.currentPreferences);\n    }\n  }\n\n  destroy(): void {\n    this.hide();\n    this.overlayElement = null;\n    this.modalElement = null;\n  }\n\n  isModalVisible(): boolean {\n    return this.isVisible;\n  }\n}\n","import { RedactoConfig, ComplianceType, BannerPosition } from \"../types\";\n\nexport const defaultBannerConfig = {\n  position: \"bottom\" as BannerPosition,\n  primaryColor: \"#3b82f6\",\n  backgroundColor: \"#ffffff\",\n  textColor: \"#374151\",\n  acceptButtonColor: \"#3b82f6\",\n  acceptButtonTextColor: \"#ffffff\",\n  rejectButtonColor: \"#6b7280\",\n  rejectButtonTextColor: \"#ffffff\",\n  manageButtonColor: \"transparent\",\n  manageButtonTextColor: \"#3b82f6\",\n  borderRadius: \"8px\",\n  fontSize: \"14px\",\n  fontFamily:\n    '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n  padding: \"16px\",\n  margin: \"16px\",\n  zIndex: 999999,\n  showIcon: true,\n  iconPosition: \"left\" as const,\n  animation: \"slide\" as const,\n  animationDuration: 300,\n};\n\nexport const defaultModalConfig = {\n  backgroundColor: \"#ffffff\",\n  overlayColor: \"rgba(0, 0, 0, 0.5)\",\n  textColor: \"#374151\",\n  primaryColor: \"#3b82f6\",\n  secondaryColor: \"#6b7280\",\n  borderRadius: \"12px\",\n  fontSize: \"14px\",\n  fontFamily:\n    '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n  padding: \"24px\",\n  maxWidth: \"600px\",\n  maxHeight: \"80vh\",\n  zIndex: 1000000,\n  animation: \"scale\" as const,\n  animationDuration: 300,\n};\n\nexport const defaultTexts = {\n  bannerTitle: \"Cookie Consent\",\n  bannerDescription:\n    'We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. By clicking \"Accept All\", you consent to our use of cookies.',\n  acceptAllText: \"Accept All\",\n  rejectAllText: \"Reject All\",\n  managePreferencesText: \"Manage Preferences\",\n  modalTitle: \"Cookie Preferences\",\n  modalDescription:\n    \"We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. You can choose which categories of cookies to allow.\",\n  necessaryTitle: \"Necessary Cookies\",\n  necessaryDescription:\n    \"These cookies are essential for the website to function properly. They cannot be disabled.\",\n  functionalTitle: \"Functional Cookies\",\n  functionalDescription:\n    \"These cookies enable enhanced functionality and personalization, such as remembering your preferences.\",\n  analyticsTitle: \"Analytics Cookies\",\n  analyticsDescription:\n    \"These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously.\",\n  advertisingTitle: \"Advertising Cookies\",\n  advertisingDescription:\n    \"These cookies are used to deliver advertisements more relevant to you and your interests.\",\n  socialTitle: \"Social Media Cookies\",\n  socialDescription:\n    \"These cookies are set by social media services that we have added to the site to enable you to share our content.\",\n  otherTitle: \"Other Cookies\",\n  otherDescription: \"These are cookies that have not been categorized yet.\",\n  savePreferencesText: \"Save Preferences\",\n  privacyPolicyText: \"Privacy Policy\",\n  cookiePolicyText: \"Cookie Policy\",\n  poweredByText: \"Powered by Redacto\",\n};\n\nexport const defaultServices: any[] = [\n  {\n    id: \"google-analytics\",\n    name: \"Google Analytics\",\n    category: \"analytics\",\n    description:\n      \"Google Analytics helps us understand how visitors interact with our website.\",\n    cookies: [\"_ga\", \"_ga_*\", \"_gid\", \"_gat\"],\n    purpose: \"Website analytics and performance measurement\",\n    retention: \"2 years\",\n    thirdParty: true,\n    thirdPartyName: \"Google LLC\",\n    thirdPartyUrl: \"https://policies.google.com/privacy\",\n  },\n  {\n    id: \"google-tag-manager\",\n    name: \"Google Tag Manager\",\n    category: \"analytics\",\n    description:\n      \"Google Tag Manager helps us manage and deploy marketing and analytics tags.\",\n    cookies: [\"_gtm\", \"_gtag\"],\n    purpose: \"Tag management and analytics\",\n    retention: \"2 years\",\n    thirdParty: true,\n    thirdPartyName: \"Google LLC\",\n    thirdPartyUrl: \"https://policies.google.com/privacy\",\n  },\n];\n\nexport const createDefaultConfig = (\n  complianceType: ComplianceType = \"DPDPA\"\n): RedactoConfig => ({\n  complianceType,\n  cookieName: \"redacto-consent\",\n  privacyUrl: \"\",\n  cookiePolicyUrl: \"\",\n  dataProcessorUrl: \"\",\n\n  banner: defaultBannerConfig,\n  modal: defaultModalConfig,\n  texts: defaultTexts,\n  services: defaultServices,\n\n  showBannerOnFirstVisit: true,\n  showBannerOnConsentChange: false,\n  autoHideBanner: false,\n  autoHideDelay: 0,\n  rememberConsent: true,\n  consentExpiry: 365,\n\n  enableGoogleConsentMode: true,\n  enableBingConsentMode: false,\n  enableDataLayer: false,\n  dataLayerName: \"dataLayer\",\n  enableSoftConsent: false,\n  enableDoNotTrack: false,\n\n  debug: false,\n});\n","import { RedactoConsentManager } from \"./ConsentManager\";\nimport { RedactoInstance } from \"./types\";\n\n// Create the global Redacto instance\nconst redacto: RedactoInstance = new RedactoConsentManager();\n\n// Make it available globally\nif (typeof window !== \"undefined\") {\n  (window as any).redacto = redacto;\n}\n\n// Export for module systems\nexport default redacto;\nexport { redacto };\nexport * from \"./types\";\n\n// Auto-initialize if config is provided via data attributes\nif (typeof window !== \"undefined\") {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    const script = document.querySelector(\"script[data-redacto-config]\");\n    if (script) {\n      try {\n        const configAttr = script.getAttribute(\"data-redacto-config\");\n        if (configAttr) {\n          const config = JSON.parse(configAttr);\n          redacto.init(config);\n        }\n      } catch (error) {\n        console.warn(\n          \"Failed to parse Redacto config from data attribute:\",\n          error\n        );\n      }\n    }\n  });\n}\n","import { DOMUtils } from \"./utils/dom\";\nimport { CookieManager } from \"./utils/cookies\";\nimport { ConsentManager as ConsentUtils } from \"./utils/consent\";\nimport { ConsentBanner } from \"./components/Banner\";\nimport { ConsentModal } from \"./components/Modal\";\nimport {\n  RedactoConfig,\n  ConsentData,\n  ConsentPreferences,\n  CookieCategory,\n  RedactoInstance,\n} from \"./types\";\nimport { createDefaultConfig } from \"./config/defaults\";\n\nexport class RedactoConsentManager implements RedactoInstance {\n  private config: RedactoConfig;\n  private cookieManager: CookieManager;\n  private consentUtils: ConsentUtils;\n  private banner: ConsentBanner;\n  private modal: ConsentModal;\n  private isInitialized: boolean = false;\n  private consentData: ConsentData | null = null;\n\n  constructor() {\n    this.config = createDefaultConfig();\n    this.cookieManager = CookieManager.getInstance();\n    this.consentUtils = new ConsentUtils();\n    this.banner = new ConsentBanner(this.config);\n    this.modal = new ConsentModal(this.config);\n\n    this.injectStyles();\n    this.setupEventListeners();\n  }\n\n  init(userConfig: Partial<RedactoConfig> = {}): void {\n    try {\n      // Merge user config with defaults\n      this.config = { ...this.config, ...userConfig };\n\n      // Update banner and modal with new config\n      this.banner.updateConfig(this.config);\n      this.modal.updateConfig(this.config);\n\n      // Load existing consent data\n      this.loadConsentData();\n\n      // Check if we need to show the banner\n      this.checkConsentStatus();\n\n      this.isInitialized = true;\n\n      if (this.config.debug) {\n        console.log(\"Redacto Cookie Consent initialized:\", this.config);\n      }\n    } catch (error) {\n      console.error(\"Failed to initialize Redacto Cookie Consent:\", error);\n    }\n  }\n\n  private injectStyles(): void {\n    // Inject CSS styles\n    const css = `\n      /* Redacto Cookie Consent Widget Styles */\n      .redacto-consent-widget {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        font-size: 14px;\n        line-height: 1.5;\n        color: #374151;\n        box-sizing: border-box;\n      }\n      .redacto-consent-widget * {\n        box-sizing: border-box;\n      }\n      \n      /* Banner Styles */\n      .redacto-banner {\n        position: fixed;\n        left: 0;\n        right: 0;\n        z-index: 999999;\n        background: #ffffff;\n        border: 1px solid #e5e7eb;\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        padding: 16px;\n        margin: 16px;\n        border-radius: 8px;\n        max-width: calc(100% - 32px);\n        animation: slideInUp 0.3s ease-out;\n      }\n      \n      .redacto-banner.top {\n        top: 0;\n        bottom: auto;\n      }\n      \n      .redacto-banner.bottom {\n        bottom: 0;\n        top: auto;\n      }\n      \n      .redacto-banner.center {\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        bottom: auto;\n        right: auto;\n        max-width: 600px;\n        width: calc(100% - 32px);\n      }\n      \n      .redacto-banner-content {\n        display: flex;\n        align-items: flex-start;\n        gap: 16px;\n        flex-wrap: wrap;\n      }\n      \n      .redacto-banner-icon {\n        flex-shrink: 0;\n        width: 24px;\n        height: 24px;\n        margin-top: 2px;\n      }\n      \n      .redacto-banner-text {\n        flex: 1;\n        min-width: 0;\n      }\n      \n      .redacto-banner-title {\n        font-size: 16px;\n        font-weight: 600;\n        margin: 0 0 8px 0;\n        color: #111827;\n      }\n      \n      .redacto-banner-description {\n        font-size: 14px;\n        margin: 0 0 16px 0;\n        color: #6b7280;\n        line-height: 1.5;\n      }\n      \n      .redacto-banner-actions {\n        display: flex;\n        gap: 12px;\n        flex-wrap: wrap;\n        align-items: center;\n      }\n      \n      .redacto-banner-button {\n        padding: 8px 16px;\n        border-radius: 6px;\n        font-size: 14px;\n        font-weight: 500;\n        border: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        text-decoration: none;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        min-height: 36px;\n        white-space: nowrap;\n      }\n      \n      .redacto-banner-button:hover {\n        transform: translateY(-1px);\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      }\n      \n      .redacto-banner-button:active {\n        transform: translateY(0);\n      }\n      \n      .redacto-banner-button.primary {\n        background: #3b82f6;\n        color: #ffffff;\n      }\n      \n      .redacto-banner-button.primary:hover {\n        background: #2563eb;\n      }\n      \n      .redacto-banner-button.secondary {\n        background: #6b7280;\n        color: #ffffff;\n      }\n      \n      .redacto-banner-button.secondary:hover {\n        background: #4b5563;\n      }\n      \n      .redacto-banner-button.outline {\n        background: transparent;\n        color: #3b82f6;\n        border: 1px solid #3b82f6;\n      }\n      \n      .redacto-banner-button.outline:hover {\n        background: #3b82f6;\n        color: #ffffff;\n      }\n      \n      /* Modal Styles */\n      .redacto-modal-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 1000000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 16px;\n        animation: fadeIn 0.3s ease-out;\n      }\n      \n      .redacto-modal {\n        background: #ffffff;\n        border-radius: 12px;\n        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n        max-width: 600px;\n        max-height: 80vh;\n        width: 100%;\n        overflow: hidden;\n        animation: scaleIn 0.3s ease-out;\n      }\n      \n      .redacto-modal-header {\n        padding: 24px 24px 0 24px;\n        border-bottom: 1px solid #e5e7eb;\n      }\n      \n      .redacto-modal-title {\n        font-size: 20px;\n        font-weight: 600;\n        margin: 0 0 8px 0;\n        color: #111827;\n      }\n      \n      .redacto-modal-description {\n        font-size: 14px;\n        margin: 0 0 24px 0;\n        color: #6b7280;\n        line-height: 1.5;\n      }\n      \n      .redacto-modal-content {\n        padding: 24px;\n        max-height: 60vh;\n        overflow-y: auto;\n      }\n      \n      .redacto-modal-footer {\n        padding: 0 24px 24px 24px;\n        border-top: 1px solid #e5e7eb;\n        display: flex;\n        gap: 12px;\n        justify-content: flex-end;\n        flex-wrap: wrap;\n      }\n      \n      /* Category Styles */\n      .redacto-category {\n        margin-bottom: 24px;\n        padding: 16px;\n        border: 1px solid #e5e7eb;\n        border-radius: 8px;\n        background: #f9fafb;\n      }\n      \n      .redacto-category-header {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        margin-bottom: 8px;\n      }\n      \n      .redacto-category-checkbox {\n        width: 18px;\n        height: 18px;\n        accent-color: #3b82f6;\n      }\n      \n      .redacto-category-checkbox:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n      \n      .redacto-category-title {\n        font-size: 16px;\n        font-weight: 600;\n        margin: 0;\n        color: #111827;\n      }\n      \n      .redacto-category-description {\n        font-size: 14px;\n        margin: 0 0 12px 0;\n        color: #6b7280;\n        line-height: 1.5;\n      }\n      \n      .redacto-category-details {\n        font-size: 12px;\n        color: #9ca3af;\n        margin: 0;\n      }\n      \n      /* Services Styles */\n      .redacto-services {\n        margin-top: 12px;\n      }\n      \n      .redacto-service {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px 0;\n        border-bottom: 1px solid #e5e7eb;\n      }\n      \n      .redacto-service:last-child {\n        border-bottom: none;\n      }\n      \n      .redacto-service-checkbox {\n        width: 16px;\n        height: 16px;\n        accent-color: #3b82f6;\n      }\n      \n      .redacto-service-name {\n        font-size: 14px;\n        font-weight: 500;\n        color: #374151;\n      }\n      \n      .redacto-service-description {\n        font-size: 12px;\n        color: #6b7280;\n        margin-left: 24px;\n      }\n      \n      /* Links */\n      .redacto-links {\n        display: flex;\n        gap: 16px;\n        margin-top: 16px;\n        flex-wrap: wrap;\n      }\n      \n      .redacto-link {\n        color: #3b82f6;\n        text-decoration: none;\n        font-size: 14px;\n      }\n      \n      .redacto-link:hover {\n        text-decoration: underline;\n      }\n      \n      /* Powered by */\n      .redacto-powered-by {\n        text-align: center;\n        font-size: 12px;\n        color: #9ca3af;\n        margin-top: 16px;\n        padding-top: 16px;\n        border-top: 1px solid #e5e7eb;\n      }\n      \n      /* Animations */\n      @keyframes slideInUp {\n        from {\n          transform: translateY(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateY(0);\n          opacity: 1;\n        }\n      }\n      \n      @keyframes slideInDown {\n        from {\n          transform: translateY(-100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateY(0);\n          opacity: 1;\n        }\n      }\n      \n      @keyframes fadeIn {\n        from {\n          opacity: 0;\n        }\n        to {\n          opacity: 1;\n        }\n      }\n      \n      @keyframes scaleIn {\n        from {\n          transform: scale(0.9);\n          opacity: 0;\n        }\n        to {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n      \n      @keyframes slideOutDown {\n        from {\n          transform: translateY(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateY(100%);\n          opacity: 0;\n        }\n      }\n      \n      @keyframes slideOutUp {\n        from {\n          transform: translateY(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateY(-100%);\n          opacity: 0;\n        }\n      }\n      \n      @keyframes fadeOut {\n        from {\n          opacity: 1;\n        }\n        to {\n          opacity: 0;\n        }\n      }\n      \n      @keyframes scaleOut {\n        from {\n          transform: scale(1);\n          opacity: 1;\n        }\n        to {\n          transform: scale(0.9);\n          opacity: 0;\n        }\n      }\n      \n      /* Responsive Design */\n      @media (max-width: 768px) {\n        .redacto-banner {\n          margin: 8px;\n          padding: 12px;\n          max-width: calc(100% - 16px);\n        }\n        \n        .redacto-banner-content {\n          flex-direction: column;\n          gap: 12px;\n        }\n        \n        .redacto-banner-actions {\n          width: 100%;\n          justify-content: stretch;\n        }\n        \n        .redacto-banner-button {\n          flex: 1;\n          min-width: 0;\n        }\n        \n        .redacto-modal {\n          margin: 16px;\n          max-height: calc(100vh - 32px);\n        }\n        \n        .redacto-modal-content {\n          max-height: calc(100vh - 200px);\n        }\n        \n        .redacto-modal-footer {\n          flex-direction: column;\n        }\n        \n        .redacto-modal-footer .redacto-banner-button {\n          width: 100%;\n        }\n      }\n      \n      /* Dark mode support */\n      @media (prefers-color-scheme: dark) {\n        .redacto-banner {\n          background: #1f2937;\n          border-color: #374151;\n          color: #f9fafb;\n        }\n        \n        .redacto-banner-title {\n          color: #f9fafb;\n        }\n        \n        .redacto-banner-description {\n          color: #d1d5db;\n        }\n        \n        .redacto-modal {\n          background: #1f2937;\n          color: #f9fafb;\n        }\n        \n        .redacto-modal-title {\n          color: #f9fafb;\n        }\n        \n        .redacto-modal-description {\n          color: #d1d5db;\n        }\n        \n        .redacto-category {\n          background: #111827;\n          border-color: #374151;\n        }\n        \n        .redacto-category-title {\n          color: #f9fafb;\n        }\n        \n        .redacto-category-description {\n          color: #d1d5db;\n        }\n        \n        .redacto-service-name {\n          color: #f9fafb;\n        }\n        \n        .redacto-service-description {\n          color: #d1d5db;\n        }\n      }\n      \n      /* High contrast mode */\n      @media (prefers-contrast: high) {\n        .redacto-banner {\n          border-width: 2px;\n        }\n        \n        .redacto-banner-button {\n          border-width: 2px;\n        }\n        \n        .redacto-category {\n          border-width: 2px;\n        }\n      }\n      \n      /* Reduced motion */\n      @media (prefers-reduced-motion: reduce) {\n        .redacto-banner,\n        .redacto-modal-overlay,\n        .redacto-modal {\n          animation: none;\n        }\n        \n        .redacto-banner-button {\n          transition: none;\n        }\n      }\n    `;\n\n    DOMUtils.injectCSS(css, \"redacto-consent-styles\");\n  }\n\n  private setupEventListeners(): void {\n    // Handle modal show from banner\n    this.config.onModalShow = () => {\n      this.showModal();\n    };\n\n    // Handle consent changes\n    this.config.onConsentChange = (consentData: ConsentData) => {\n      this.handleConsentChange(consentData);\n    };\n  }\n\n  private loadConsentData(): void {\n    this.consentData = this.cookieManager.getConsentData(\n      this.config.cookieName\n    );\n\n    if (\n      this.consentData &&\n      this.consentUtils.isConsentValid(\n        this.consentData,\n        this.config.consentExpiry\n      )\n    ) {\n      if (this.config.debug) {\n        console.log(\"Loaded existing consent data:\", this.consentData);\n      }\n    } else {\n      this.consentData = null;\n      if (this.config.debug) {\n        console.log(\"No valid consent data found\");\n      }\n    }\n  }\n\n  private checkConsentStatus(): void {\n    if (!this.consentData && this.config.showBannerOnFirstVisit) {\n      this.showBanner();\n    } else if (this.consentData && this.config.showBannerOnConsentChange) {\n      this.showBanner();\n    }\n  }\n\n  private handleConsentChange(consentData: ConsentData): void {\n    this.consentData = consentData;\n\n    // Save consent data\n    if (this.config.rememberConsent) {\n      this.cookieManager.setConsentData(\n        this.config.cookieName,\n        consentData,\n        this.config.consentExpiry\n      );\n    }\n\n    // Update Google Consent Mode\n    if (this.config.enableGoogleConsentMode) {\n      this.updateGoogleConsentMode(consentData);\n    }\n\n    // Update Bing Consent Mode\n    if (this.config.enableBingConsentMode) {\n      this.updateBingConsentMode(consentData);\n    }\n\n    // Update Data Layer\n    if (this.config.enableDataLayer) {\n      this.updateDataLayer(consentData);\n    }\n\n    // Execute service scripts\n    this.executeServiceScripts(consentData);\n\n    if (this.config.debug) {\n      console.log(\"Consent changed:\", consentData);\n    }\n  }\n\n  private updateGoogleConsentMode(consentData: ConsentData): void {\n    try {\n      if (typeof window !== \"undefined\" && (window as any).gtag) {\n        const gtag = (window as any).gtag;\n\n        gtag(\"consent\", \"update\", {\n          ad_storage: consentData.preferences.advertising\n            ? \"granted\"\n            : \"denied\",\n          analytics_storage: consentData.preferences.analytics\n            ? \"granted\"\n            : \"denied\",\n          functionality_storage: consentData.preferences.functional\n            ? \"granted\"\n            : \"denied\",\n          personalization_storage: consentData.preferences.functional\n            ? \"granted\"\n            : \"denied\",\n          security_storage: \"granted\",\n        });\n      }\n    } catch (error) {\n      console.warn(\"Failed to update Google Consent Mode:\", error);\n    }\n  }\n\n  private updateBingConsentMode(consentData: ConsentData): void {\n    try {\n      if (typeof window !== \"undefined\" && (window as any).uetq) {\n        const uetq = (window as any).uetq;\n        uetq(\n          \"consent\",\n          consentData.preferences.advertising ? \"granted\" : \"denied\"\n        );\n      }\n    } catch (error) {\n      console.warn(\"Failed to update Bing Consent Mode:\", error);\n    }\n  }\n\n  private updateDataLayer(consentData: ConsentData): void {\n    try {\n      if (typeof window !== \"undefined\") {\n        const dataLayer = (window as any)[this.config.dataLayerName] || [];\n        dataLayer.push({\n          event: \"consent_update\",\n          consent_data: consentData,\n        });\n      }\n    } catch (error) {\n      console.warn(\"Failed to update data layer:\", error);\n    }\n  }\n\n  private executeServiceScripts(consentData: ConsentData): void {\n    this.config.services.forEach((service) => {\n      const hasConsent = this.consentUtils.hasConsentForCategory(\n        consentData,\n        service.category\n      );\n\n      if (hasConsent && service.onAccept) {\n        try {\n          service.onAccept();\n        } catch (error) {\n          console.warn(\n            `Failed to execute onAccept for service ${service.id}:`,\n            error\n          );\n        }\n      } else if (!hasConsent && service.onReject) {\n        try {\n          service.onReject();\n        } catch (error) {\n          console.warn(\n            `Failed to execute onReject for service ${service.id}:`,\n            error\n          );\n        }\n      }\n    });\n  }\n\n  // Public API methods\n  showBanner(): void {\n    this.banner.show();\n  }\n\n  hideBanner(): void {\n    this.banner.hide();\n  }\n\n  showModal(): void {\n    const preferences =\n      this.consentData?.preferences ||\n      this.consentUtils.getDefaultPreferences();\n    this.modal.show(preferences);\n  }\n\n  hideModal(): void {\n    this.modal.hide();\n  }\n\n  acceptAll(): void {\n    const preferences: ConsentPreferences = {\n      necessary: true,\n      functional: true,\n      analytics: true,\n      advertising: true,\n      social: true,\n      other: true,\n    };\n\n    const consentData = this.consentUtils.createConsentData(\n      preferences,\n      this.config.complianceType\n    );\n    this.handleConsentChange(consentData);\n  }\n\n  rejectAll(): void {\n    const preferences: ConsentPreferences = {\n      necessary: true, // Always required\n      functional: false,\n      analytics: false,\n      advertising: false,\n      social: false,\n      other: false,\n    };\n\n    const consentData = this.consentUtils.createConsentData(\n      preferences,\n      this.config.complianceType\n    );\n    this.handleConsentChange(consentData);\n  }\n\n  savePreferences(preferences: Partial<ConsentPreferences>): void {\n    const validatedPreferences =\n      this.consentUtils.validatePreferences(preferences);\n    const consentData = this.consentUtils.mergeConsentData(\n      this.consentData,\n      validatedPreferences,\n      this.config.complianceType\n    );\n    this.handleConsentChange(consentData);\n  }\n\n  getConsent(): ConsentData | null {\n    return this.consentData;\n  }\n\n  hasConsent(category: CookieCategory): boolean {\n    return this.consentUtils.hasConsentForCategory(this.consentData, category);\n  }\n\n  hasServiceConsent(serviceId: string): boolean {\n    return this.consentUtils.hasConsentForService(this.consentData, serviceId);\n  }\n\n  resetConsent(): void {\n    this.cookieManager.clearConsentData(this.config.cookieName);\n    this.consentData = null;\n\n    if (this.config.showBannerOnConsentChange) {\n      this.showBanner();\n    }\n  }\n\n  destroy(): void {\n    this.banner.destroy();\n    this.modal.destroy();\n    DOMUtils.removeStyleSheet(\"redacto-consent-styles\");\n    this.isInitialized = false;\n  }\n}\n"],"names":["DOMUtils","createElement","tag","className","id","element","document","createButton","text","onClick","button","textContent","addEventListener","createDiv","content","div","innerHTML","createSpan","span","createParagraph","p","createHeading","level","heading","createLink","href","target","link","createCheckbox","checked","disabled","checkbox","type","createLabel","forId","label","htmlFor","addStyles","styles","Object","assign","style","addClass","classList","add","removeClass","remove","toggleClass","toggle","hasClass","contains","show","display","hide","isVisible","offsetParent","getElementById","getElementsByClassName","querySelector","selector","querySelectorAll","appendChild","parent","child","removeChild","insertBefore","newChild","referenceChild","replaceChild","oldChild","event","handler","removeEventListener","createStyleSheet","css","injectCSS","this","head","removeStyleSheet","getViewportSize","width","window","innerWidth","documentElement","clientWidth","height","innerHeight","clientHeight","isMobile","isTablet","isDesktop","getDeviceType","debounce","func","wait","timeout","args","clearTimeout","setTimeout","throttle","limit","inThrottle","escapeHtml","sanitizeHtml","html","innerText","CookieManager","getInstance","instance","setCookie","name","value","days","domain","path","expires","Date","setTime","getTime","cookieString","encodeURIComponent","toUTCString","location","protocol","filter","Boolean","join","cookie","error","console","warn","getCookie","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","decodeURIComponent","deleteCookie","getAllCookies","cookies","cookieArray","trim","setConsentData","cookieName","consentData","expiryDays","consentString","JSON","stringify","getConsentData","parse","timestamp","preferences","complianceType","clearConsentData","isConsentExpired","now","getDomain","hostname","getRootDomain","parts","slice","ConsentManager","constructor","cookieManager","generateConsentId","Math","random","toString","substr","createConsentData","services","consentId","version","getDefaultPreferences","necessary","functional","analytics","advertising","social","other","validatePreferences","defaultPrefs","hasConsentForCategory","category","hasConsentForService","serviceId","isConsentValid","mergeConsentData","existing","newPreferences","validatedPreferences","getConsentSummary","hasConsent","categories","totalServices","consentedServices","values","state","isDPDPACompliant","entries","every","granted","undefined","isGDPRCompliant","isCCPACompliant","getComplianceStatus","isCompliant","issues","push","ConsentBanner","config","bannerElement","create","banner","position","applyBannerStyles","createBannerContent","showIcon","icon","createIcon","createTextContent","actions","createActionButtons","title","texts","bannerTitle","description","bannerDescription","acceptButton","acceptAllText","onAcceptAll","rejectButton","rejectAllText","onRejectAll","manageButton","managePreferencesText","onManagePreferences","backgroundColor","color","textColor","borderRadius","fontSize","fontFamily","padding","margin","zIndex","applyButtonStyles","acceptButtonColor","acceptButtonTextColor","rejectButtonColor","rejectButtonTextColor","manageButtonTextColor","borderColor","body","animation","animateIn","onBannerShow","animateOut","removeBanner","parentNode","onBannerHide","animationClass","getAnimationClass","animationDuration","callback","direction","triggerConsentChange","onModalShow","onConsentChange","updateConfig","newConfig","destroy","isBannerVisible","ConsentModal","modalElement","overlayElement","currentPreferences","overlay","applyOverlayStyles","modal","applyModalStyles","header","createModalHeader","createModalContent","footer","createModalFooter","modalTitle","modalDescription","forEach","categoryElement","createCategorySection","links","createLinksSection","categoryDiv","getCategoryTitle","getCategoryDescription","service","servicesDiv","createServicesSection","e","updateServicesState","serviceDiv","linksDiv","privacyUrl","privacyLink","privacyPolicyText","cookiePolicyUrl","cookieLink","cookiePolicyText","saveButton","savePreferencesText","onSavePreferences","cancelButton","overlayColor","maxWidth","maxHeight","necessaryTitle","functionalTitle","analyticsTitle","advertisingTitle","socialTitle","otherTitle","toUpperCase","necessaryDescription","functionalDescription","analyticsDescription","advertisingDescription","socialDescription","otherDescription","enabled","input","startsWith","replace","find","s","updateCheckboxes","removeModal","onModalHide","keys","isModalVisible","defaultBannerConfig","primaryColor","manageButtonColor","iconPosition","defaultModalConfig","secondaryColor","defaultTexts","poweredByText","defaultServices","purpose","retention","thirdParty","thirdPartyName","thirdPartyUrl","redacto","isInitialized","dataProcessorUrl","showBannerOnFirstVisit","showBannerOnConsentChange","autoHideBanner","autoHideDelay","rememberConsent","consentExpiry","enableGoogleConsentMode","enableBingConsentMode","enableDataLayer","dataLayerName","enableSoftConsent","enableDoNotTrack","debug","createDefaultConfig","consentUtils","ConsentUtils","injectStyles","setupEventListeners","init","userConfig","loadConsentData","checkConsentStatus","log","showModal","handleConsentChange","showBanner","updateGoogleConsentMode","updateBingConsentMode","updateDataLayer","executeServiceScripts","gtag","ad_storage","analytics_storage","functionality_storage","personalization_storage","security_storage","uetq","consent_data","onAccept","onReject","hideBanner","hideModal","acceptAll","rejectAll","savePreferences","getConsent","hasServiceConsent","resetConsent","script","configAttr","getAttribute"],"mappings":"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"}